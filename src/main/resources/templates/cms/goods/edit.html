<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<head th:include="include :: header"></head>
<link href="/ajax/libs/iCheck/custom.css" th:href="@{/ajax/libs/iCheck/custom.css}" rel="stylesheet"/>
<link href="/ajax/libs/select/select2.css" th:href="@{/ajax/libs/select/select2.css}" rel="stylesheet"/>
<link href="/xshop/css/xshop.css" th:href="@{/xshop/css/xshop.css}" rel="stylesheet"/>

<link href="/css/animate.css" th:href="@{/css/animate.css}" rel="stylesheet"/>
<link href="/css/font-awesome.min.css" th:href="@{/css/font-awesome.css}" rel="stylesheet"/>
<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote.css" rel="stylesheet">
<link href="/css/plugins/summernote/summernote-bs3.css" th:href="@{/css/plugins/summernote/summernote-bs3.css}" rel="stylesheet"/>
<link href="/css/plugins/dataTables/dataTables.bootstrap.css" th:href="@{/css/plugins/dataTables/dataTables.bootstrap.css}" rel="stylesheet"/>
<body class="white-bg">
	<div class="wrapper wrapper-content animated fadeInRight ibox-content">
		<form class="form-horizontal m" id="form-goods-edit">
			<input name="goodsId"  type="hidden"  th:value="${goods.id}" />
            <input name="goodsId"  type="hidden"  th:value="${goods.id}" />
            <input name="goodsId"  type="hidden"  th:value="${goods.id}" />
            <input name="goodsId"  type="hidden"  th:value="${goods.id}" />
			<div class="form-group">
				<label class="col-sm-3 control-label ">商品名：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" id="goodsName" name="name" th:value="${goods.name}"/>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label ">商品标题：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" id="goodsTitle" name="title" th:value="${goods.title}"/>
				</div>
			</div>
			<div class="form-group">
				<input type="hidden" id="categoryId" name="categoryId" th:value="${goods.categoryId}">
				<label class="col-sm-3 control-label">分类：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="categoryName" onclick="categoryTree()" readonly="true" id="categoryName"  th:value="${goods.categoryName}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">原价：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="oldPrice" id="oldPrice" th:value="${goods.oldPrice}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">现价：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="price" id="price" th:value="${goods.price}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">最低价：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="lowerPrice" id="lowerPrice" th:value="${goods.lowerPrice}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">折扣（0~1）：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="discount" id="discount" th:value="${goods.discount}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">单位：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="unit" id="unit" th:value="${goods.unit}">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">条码：</label>
				<div class="col-sm-8">
					<input class="form-control" type="text" name="barcode" id="barcode" th:value="${goods.barcode}">
				</div>
			</div>
			<div class="form-group">
				<input type="hidden" id="smallPic" name="smallPic" th:value="${goods.smallPic}" >
				<label class="col-sm-3 control-label">小图：</label>
				<input class="file-input qiniuUp" type="file" id="small" inputId="smallPic" imgId="smallPicImg" text="选择小图"/>
				<div class="col-sm-8">
					<div class="radio radio-info radio-inline">
						<img th:src="${goods.smallPic}" width="auto" height="80px" id = "smallPicImg">
					</div>
				</div>
			</div>
			<div class="form-group">
				<input type="hidden" id="picOne" name="picOne"  th:value="${goods.picOne}">
				<input type="hidden" id="picTwo" name="picTwo"  th:value="${goods.picTwo}">
				<input type="hidden" id="picThree" name="picThree"  th:value="${goods.picThree}">
				<input type="hidden" id="picFour" name="picFour"  th:value="${goods.picFour}">
				<input type="hidden" id="picFive" name="picFive"  th:value="${goods.picFive}">
				<label class="col-sm-3 control-label">主图：</label>
				<input class="file-input qiniuUp" style="width: 150px; display:inline;" type="file" id="one" inputId="picOne" imgId="onePicImg" text="主图一"/>
				<input class="file-input qiniuUp" style="width: 150px; display:inline;" type="file" id="two" inputId="picTwo" imgId="twoPicImg" text="主图二"/>
				<input class="file-input qiniuUp" style="width: 150px; display:inline;" type="file" id="three" inputId="picThree" imgId="threePicImg" text="主图三"/>
				<input class="file-input qiniuUp" style="width: 150px; display:inline;" type="file" id="four" inputId="picFour" imgId="fourPicImg" text="主图四"/>
				<input class="file-input qiniuUp" style="width: 150px; display:inline;" type="file" id="five" inputId="picFive" imgId="fivePicImg" text="主图五"/>
				<div class="col-sm-8">
					<div class="radio radio-info radio-inline">
						<img th:src="${goods.picOne}" width="auto" height="80px" id = "onePicImg">
						<img th:src="${goods.picTwo}" width="auto" height="80px" id = "twoPicImg">
						<img th:src="${goods.picThree}" width="auto" height="80px" id = "threePicImg">
						<img th:src="${goods.picFour}" width="auto" height="80px" id = "fourPicImg">
						<img th:src="${goods.picFive}" width="auto" height="80px" id = "fivePicImg">
					</div>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">规格：</label>
				<div class="col-sm-9">
					<div class="">
						<a onclick="fnClickAddRow();" href="javascript:void(0);" class="btn btn-primary ">添加行</a>
					</div>
					<table class="table table-striped table-bordered table-hover " style="width: 100%" id="editable">
						<thead>
						<tr>
							<th style="width: 70px">颜色</th>
							<th style="width: 70px">尺码</th>
							<th style="width: 70px">数量</th>
							<th style="width: 70px">编码</th>
							<th style="width: 70px">条形码</th>
							<th style="width: 70px">图片</th>
							<th style="width: 70px">选择图片</th>
						</tr>
						</thead>
						<tbody>
                            <th:block th:each="spec,iterStat:${goods.goodsSpec}">
                            <tr>
                                <th><input type="text" style="width: 70px" th:id="${'goodsSpec['+iterStat.index+'].norm'}" th:name="${'goodsSpec['+iterStat.index+'].norm'}" th:value="${spec.norm}" ></th>
                                <th><input type="text" style="width: 70px" th:id="${'goodsSpec['+iterStat.index+'].size'}" th:name="${'goodsSpec['+iterStat.index+'].size'}" th:value="${spec.size}" ></th>
                                <th><input type="text" style="width: 70px" th:id="${'goodsSpec['+iterStat.index+'].num'}" th:name="${'goodsSpec['+iterStat.index+'].num'}" th:value="${spec.num}" ></th>
                                <th><input type="text" style="width: 70px" th:id="${'goodsSpec['+iterStat.index+'].styleNum'}" th:name="${'goodsSpec['+iterStat.index+'].styleNum'}" th:value="${spec.styleNum}" ></th>
                                <th><input type="text" style="width: 70px" th:id="${'goodsSpec['+iterStat.index+'].barcode'}" th:name="${'goodsSpec['+iterStat.index+'].barcode'}" th:value="${spec.barcode}" ></th>
                                <th><input type="hidden" th:id="${'goodsSpec['+iterStat.index+'].img'}" th:name="${'goodsSpec['+iterStat.index+'].img'}" th:value="${spec.img}" >
                                <img th:src="${spec.img}" width="auto" height="70px" th:id = "${'specPic'+iterStat.index}"></th>
                                <th><input class="file-input qiniuUp" style="width: 70px" type="file" th:id="${'specFile'+iterStat.index}" th:inputId="${'goodsSpec['+iterStat.index+'].img'}" th:imgId="${'specPic'+iterStat.index}" text="规格图"  onchange="qiniuUpImg(this)"/></th>
                            </tr>
                            </th:block>
						</tbody>
					</table>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">商品详情：</label>
				<input type="hidden" id="goodsDesc" name="goodsDesc" >
				<div class="ibox-content no-padding">
					<div class="summernote" id="summernote" name="summernote">

					</div>
				</div>
			</div>
			
			<div class="form-group">
				<div class="form-control-static col-sm-offset-9">
					<button type="submit" class="btn btn-primary">提交</button>
					<button th:onclick="'javascript:layer_close()'" class="btn btn-danger" type="button">关闭</button>
				</div>
			</div>
		</form>
	</div>
	<div th:include="include::footer"></div>
	<script src="/xshop/system/goods/edit.js" th:src="@{/xshop/cms/goods/edit.js}">
	</script>
	<script src="/ajax/libs/iCheck/icheck.min.js" th:src="@{/ajax/libs/iCheck/icheck.min.js}"></script>
	<script src="/ajax/libs/select/select2.js" th:src="@{/ajax/libs/select/select2.js}"></script>
    <script src="/js/plugins/summernote/summernote.js" th:src="@{/js/plugins/summernote/summernote.js}"></script>
    <script src="/js/plugins/summernote/summernote-zh-CN.js" th:src="@{/js/plugins/summernote/summernote-zh-CN.js}"></script>
    <script src="/js/plugins/summernote/init-qiniu.js" th:src="@{/js/plugins/summernote/init-qiniu.js}"></script>
    <script src="/js/plugins/dataTables/jquery.dataTables.js" th:src="@{/js/plugins/dataTables/jquery.dataTables.js}"></script>
    <script src="/js/plugins/dataTables/dataTables.bootstrap.js" th:src="@{/js/plugins/dataTables/dataTables.bootstrap.js}"></script>
    <script src="/js/content.min.js" th:src="@{/js/content.min.js}"></script>

	<script th:inline="javascript">
        $(document).ready(function(){
            $(".i-checks").iCheck({
                checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",
            })

            var goodsDesc = [[${goods.goodsDesc}]];
            $('#summernote').summernote('code',goodsDesc);
        });

        function fnClickAddRow(){
            var index = $("#editable").find("tr").length-1;
            $("#editable").dataTable().fnAddData([
                '<input type="text" style="width: 70px" id="goodsSpec['+index+'].norm" name="goodsSpec['+index+'].norm" >',
                '<input type="text" style="width: 70px" id="goodsSpec['+index+'].size" name="goodsSpec['+index+'].size" >',
                '<input type="text" style="width: 70px" id="goodsSpec['+index+'].num" name="goodsSpec['+index+'].num" >',
                '<input type="text" style="width: 70px" id="goodsSpec['+index+'].styleNum" name="goodsSpec['+index+'].styleNum" >',
                '<input type="text" style="width: 70px" id="goodsSpec['+index+'].barcode" name="goodsSpec['+index+'].barcode" >',
                '<input type="hidden" id="goodsSpec['+index+'].img" name="goodsSpec['+index+'].img" >' +
                '<img src="/img/webuploader.png" width="auto" height="70px" id = "specPic'+index+'">',
                '<input class="file-input qiniuUp" style="width: 70px" type="file" id="specFile'+index+'" inputId="goodsSpec['+index+'].img" imgId="specPic'+index+'" text="规格图"  onchange="qiniuUpImg(this)"/>'
            ])
        };

	</script>
</body>
</html>
